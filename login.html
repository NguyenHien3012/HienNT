<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/login.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Fandelo</title>
  </head>
  <body>
    <div class="main">
      <div class="container">
        <div class="logo">
          <a href="/index.html">
            <img src="/assets/image/fandelo_logo.png" alt="" />
          </a>
        </div>
        <div class="form-login">
          <div class="form-group">
            <h1>Log in</h1>
            <form action="" method="post" class="form" id="form-1">
              <div class="form-input">
                <input
                  id="email"
                  type="email"
                  name="email"
                  placeholder="Email"
                  class="form-control"
                />
                <span class="error-txt"></span>
              </div>
              <div class="form-input">
                <input
                  id="password"
                  type="password"
                  name="password"
                  placeholder="Password"
                  class="form-control"
                />
                <span class="error-txt"></span>
              </div>
              <div class="form-input">
                <button class="btn-login" type="form-submit">
                  <div class="btn-login-1">
                    <span>Log in</span>
                  </div>
                </button>
              </div>
            </form>
            <div class="forgot-password hover-item">
              <a href="">Forgot password?</a>
            </div>
            <div class="signin-social">
              <span>Or login with </span>
              <button class="icons">
                <a href="https://twitter.com/">
                  <i class="fa fa-twitter"></i>
                </a>
              </button>
              <button class="icons">
                <a href="https://facebook.com/">
                  <i class="fa fa-facebook"></i>
                </a>
              </button>
            </div>
            <div class="signin-suggest">
              <div class="footer hover-item">
                <span>New to Fandelo</span>
                <a href="/signup.html">Sign up</a>
              </div>
              <div class="footer login hover-item">
                <span>Are you a Fandelo</span>
                <a href="">Log in</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/login.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      Validator({
        form: "#form-1",
        errorSelector: ".error-txt",
        rules: [
          Validator.isRequired("#email"),
          Validator.isRequired("#password"),
          Validator.isEmail("#email"),
          Validator.minLength("#password", 8),
        ],
        onSubmit: function (data) {
          // axios({
          //   method: "post",
          //   url: "https://test.fandelo.com/api/portal/app/login",
          //   data: {
          // deviceId: "a9ea993ab601ccd3fd18efb47f198ea8",
          // password: data.password,
          // platformType: 3,
          // platformVersion: "1.0",
          // pnsToken: "a9ea993ab601ccd3fd18efb47f198ea8",
          // username: data.username,
          //   },
          // https://test.fandelo.com/api/portal/fan/home
          // });
          axios
            .post(`https://test.fandelo.com/api/portal/app/login`, {
              username: data.email,
              password: data.password,
              deviceId: "a9ea993ab601ccd3fd18efb47f198ea8",
              platformType: 3,
              platformVersion: "1.0",
              pnsToken: "a9ea993ab601ccd3fd18efb47f198ea8",
            })
            .then(
              (res) => {
                if (res.data.error) {
                  alert(res.data.error.message);
                } else {
                  localStorage.setItem("eko-user", JSON.stringify(res.data));
                  location.href = "/homepage.html";
                }
              },
              (error) => {
                console.log(error);
              }
            );
        },
      });
    </script>
  </body>
</html>
